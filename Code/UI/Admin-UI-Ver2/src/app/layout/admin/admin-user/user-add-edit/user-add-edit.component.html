<div class="bg-primary text-white font-weight-bold" mat-dialog-title>
  <h1 class="font-weight-bold fs-3" style="font-weight: semi-bold">
    {{ data ? "UPDATE SELECTED USER FORM" : "ADD NEW USER FORM" }}
  </h1>
</div>
<div class="mt-3">
  <form [formGroup]="userForm" (ngSubmit)="onFormSubmit()">
    <div mat-dialog-content class="content">
      <div class="row mt-1">
        <div class="col-6">
          <mat-form-field appearance="outline">
            <mat-label>Username</mat-label>
            <input
              type="text"
              id="username"
              name="username"
              matInput
              placeholder="username1"
              formControlName="username"
              [errorStateMatcher]="matcher"
            />
            <mat-error
              *ngIf="
                userForm.get('username')?.hasError('minlength') &&
                !userForm.get('username')?.hasError('required')
              "
              >Username is at least 2 characters</mat-error
            >
            <mat-error *ngIf="userForm.get('username')?.hasError('required')"
              >Username is required</mat-error
            >
          </mat-form-field>
        </div>

        <div class="col-6">
          <mat-form-field appearance="outline">
            <mat-label>Password</mat-label>
            <input
              type="password"
              id="password"
              name="password"
              matInput
              placeholder="password1"
              formControlName="password"
              [errorStateMatcher]="matcher"
            />
            <mat-error
              *ngIf="
                userForm.get('password')?.hasError('minlength') &&
                !userForm.get('password')?.hasError('required')
              "
              >Password is at least 2 characters</mat-error
            >
            <mat-error *ngIf="userForm.get('password')?.hasError('required')"
              >Password is required</mat-error
            >
          </mat-form-field>
        </div>
      </div>

      <div class="row mt-1">
        <div class="col-6">
          <mat-form-field appearance="outline">
            <mat-label>Email</mat-label>
            <input
              type="text"
              id="email"
              name="email"
              matInput
              placeholder="email1"
              formControlName="email"
              [errorStateMatcher]="matcher"
            />
            <mat-error
              *ngIf="
                userForm.get('email')?.hasError('email') &&
                !userForm.get('email')?.hasError('required')
              "
              >Email is not valid</mat-error
            >
            <mat-error *ngIf="userForm.get('email')?.hasError('required')"
              >Email is required</mat-error
            >
          </mat-form-field>
        </div>

        <div class="col-6">
          <mat-form-field appearance="outline">
            <mat-label>Fullname</mat-label>
            <input
              type="text"
              id="fullName"
              name="fullName"
              matInput
              placeholder="fullname1"
              formControlName="fullName"
              [errorStateMatcher]="matcher"
            />
            <mat-error
              *ngIf="
                userForm.get('fullName')?.hasError('minlength') &&
                !userForm.get('fullName')?.hasError('required')
              "
              >Full name is not valid</mat-error
            >
            <mat-error *ngIf="userForm.get('fullName')?.hasError('required')"
              >Fullname is required</mat-error
            >
          </mat-form-field>
        </div>
      </div>

      <div class="row mt-1">
        <div class="col-6">
          <mat-form-field appearance="outline">
            <mat-label>Birthday</mat-label>
            <mat-hint>MM/DD/YYYY</mat-hint>
            <input
              matInput
              [matDatepicker]="picker"
              placeholder="Choose a date"
              formControlName="birthday"
            />
            <mat-datepicker-toggle
              matIconSuffix
              [for]="picker"
            ></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
          </mat-form-field>
        </div>

        <div class="col-6">
          <mat-form-field appearance="outline">
            <mat-label>Address</mat-label>
            <input
              type="text"
              id="address"
              name="address"
              matInput
              placeholder="address1"
              formControlName="address"
              [errorStateMatcher]="matcher"
            />
            <mat-error
              *ngIf="
                userForm.get('address')?.hasError('minlength') &&
                !userForm.get('address')?.hasError('required')
              "
              >Address is not valid</mat-error
            >
            <mat-error *ngIf="userForm.get('address')?.hasError('required')"
              >Address is required</mat-error
            >
          </mat-form-field>
        </div>
      </div>

      <div class="row mt-1">
        <div class="col-6">
          <mat-form-field appearance="outline">
            <mat-label>Phone number</mat-label>
            <input
              type="text"
              id="phoneNumber"
              name="phoneNumber"
              matInput
              placeholder="0388124368"
              formControlName="phoneNumber"
              [errorStateMatcher]="matcher"
            />
            <mat-error
              *ngIf="
                userForm.get('phoneNumber')?.hasError('pattern') &&
                !userForm.get('phoneNumber')?.hasError('required')
              "
              >Phone number is not valid</mat-error
            >
            <mat-error *ngIf="userForm.get('phoneNumber')?.hasError('required')"
              >phoneNumber is required</mat-error
            >
          </mat-form-field>
        </div>

        <div class="col-6">
          <mat-form-field appearance="outline">
            <mat-label>Gender</mat-label>
            <mat-select
              aria-label="Gender"
              appearance="outline"
              formControlName="gender"
              [(value)]="selected"
            >
              <mat-option value="male">Male</mat-option>
              <mat-option value="female">Female</mat-option>
              <mat-option value="other">Other</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </div>

      <div class="row">
        <div class="ml-1">
          <label><b>Avatar</b></label>
          <div class="input-group mb-3">
            <input
              class="form-control"
              id="avatar"
              name="avatar"
              type="file"
              (change)="previewImage($event.target)"
            />
          </div>
        </div>
        <div id="imagePreview" style="max-width: 300px">
          <!-- Hiển thị ảnh cũ nếu có -->
        </div>
      </div>
    </div>
  </form>
</div>
<div mat-dialog-actions class="action">
  <button
    type="button"
    mat-raised-button
    color="warning"
    [mat-dialog-close]="true"
  >
    Cancel
  </button>
  <button
    type="submit"
    mat-raised-button
    color="primary"
    [disabled]="userForm.invalid"
    (click)="onFormSubmit()"
  >
    {{ data ? "Update" : "Save" }}
  </button>
</div>
